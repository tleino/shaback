shaback is a SHA-checksumming backup/restore tool, similar to tar(1),
pax(1), dump(8), but is

   1) free from file size or file name limits
   2) very simple, no legacy cruft
   3) does SHA-checksumming
   4) builds an index and can restore single files fast
   5) TODO: deduplicates cheaply

USE AT YOUR OWN RISK! NOT YET TESTED VERY WELL!

Example:

   # Build new archive
   find / -print0 | shaback -0 -w /tmp/test

   # Extract the index from archive
   OFFSET=$(head -1 /tmp/test | awk '{ print $7 }')
   dd if=/tmp/test bs=512 skip=$OFFSET

   # Extract particular file
   FILE_OFFSET=$(expr $(dd if=/tmp/test bs=512 skip=$OFFSET | \
      grep -m1 file | awk '{ print $2 }') / 512)
   FILE_SIZE=$(expr $(dd if=/tmp/test bs=512 skip=$OFFSET | \
      grep -m1 file | awk '{ print $11 }') / 512)
   dd if=/tmp/test bs=512 skip=$FILE_OFFSET count=$FILE_SIZE

Builds an image like this:

   SHABACK <shaback magic number> <time> <entries> <index offset>
   <end offset> <index offset in blocks> <end offset in blocks>\n

And then files are dumped one by one, and each followed by a metadata
section:

   <shaback magic number> <offset> <type> <inode> <ctime> <atime>
   <mtime> <mode> <uid> <gid> <size> <hash meta> <hash file> <paths len>\n
   <path>\0<link path>\0\n

And lastly, all metadata sections are dumped once more at the index
offset, i.e. metadata is duplicated (in case the index is corrupted).

All entries are aligned to 512-byte blocks in case bad blocks corrupts
something, rest of the blocks can be salvaged cleanly. There is also
guaranteed to be a NUL-character after each block which means an empty
block is added if the block ends at the 512-byte boundary.

The shaback magic number is a random number that is unique so that
corrupted or partially broken backup can be restored.

Standard tools like dd can be used for restoring a corrupted archive.
